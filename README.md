## Планирование маршрута дрона с учётом кинематических ограничений
Задача заключается в планировании маршрута квадрокоптера для облёта заданного набора точек, которые произвольно задаются на карте. Каждая точка задана географическими координатами (широта и долгота), высотой полёта и ориентацией дрона в пространстве. Пользователь задаёт точки на интерактивной карте без предварительной нумерации, после чего алгоритм определяет оптимальный порядок их посещения. Квадрокоптер должен облететь все точки, начиная с первой, и вернуться в неё(задача коммивояжёра), минимизируя общую длину маршрута и обеспечивая достаточность заряда аккумулятора.



ИСПОЛЬЗОВАТЬ Python 3.7, так как библиотека "dubins" поддерживается только до python 3.7 - https://piwheels.org/project/dubins/

В Win 11 запустить установку не удалось - проблема с wheel(Ошибка в компиляции C). 
  
### Один из рабочих способов установки "Dubins" на win 11

1. Откройте Visual Studio Installer.

Убедитесь, что установлен компонент "Desktop development with C++" (Разработка настольных приложений на C++). Если его нет, добавьте и установите.

Убедитесь, что установлен Windows SDK (например, версия 10.x).

2. Официальный репозиторий библиотеки dubins на GitHub: github.com/AndrewWalker/pydubins.

```powershell

git clone https://github.com/AndrewWalker/pydubins.git

cd pydubins

```

3. Добавьте определение M_PI: В начало файла (В папке с исходниками перейди в dubins/src/), после #include директив (например, после #include "dubins.h"), вставьте:

```c

#ifndef M_PI

#define M_PI 3.14159265358979323846

#endif

```

  4. Установка модифицированной версии через pip
Важно запускать pip и python с приставкой 3.7(при условии, что он установлен и активно окружение), например:
```powershell
PS C:\Test> python3.7 app.js
PS C:\Test> pip3.7 install dubins
```

Установка окружения:
```powershell
python3.7 -m venv venv
```
Активация:

```powershell
.\venv\Scripts\activate
```


Установите зависимости для компиляции:

```powershell


pip3.7 install numpy setuptools

```

Перейдите в папку с исходниками:

```powershell

cd C:\dev\python\dubins-source\pydubins

```

Выполните установку:

```powershell

pip3.7 install .

```

Проверьте установку:
После завершения установки попробуйте импортировать:

```powershell

python3.7 -c "import dubins; print(dubins.__version__)"

```

Если ошибок нет, всё сработало!

##### Перед запуском
Не забыть установить другие зависимости: 
```powershell
pip install -r requirements.txt
```

##### Структура проекта
```cmd
│   .gitignore
│   ACODubins.py :: тест библиотеки Дубинс 
│   ACODubinsGIS.py :: тест Dubins на реальных координатах - ".geojson". Результат: страница html с маршрутом.
│   forest_points.geojson :: тестовые точки
│   README.md
│   requirements.txt
│
└───server
    ├───realistic :: сложная модель подсчёта энергии дрона(экспериментально)
    │       app.py
    │       index.html
    │       README.md
    │
    └───simple :: простая версия сервера с простым подсчётом энергии дрона
            app.py
            index.html

```


В папке server:
- /simple - простая версия сервера с простым подсчётом энергии дрона. Считает энергию как: 
$$E = L_с * E_{метр} * К_{поворота}$$,
	
 	где:
	- $L_с$ – расстояние(длина, метры) сегмента.
	- $E_{метр}$ - указывается пользователем (Дж/м)
	- $К_{поворота}$ - также.
	Затем считается сумма всех сегментов.
	
 	То есть очень простая модель.
	
	А времени?
	
	Подсчёт времени формула: $$T = \frac{L_с}{U} $$, где
	
   	$L_с$ – длина сегмента(м),
	$U$ – скорость дрона на всем участке(м/с) (при повороте скорость сохраняется). 
  
- /realistic - сложная модель подсчёта энергии дрона (экспериментально). Есть баг с расходом аккумулятора.

### Пример работы приложения
Добавление точек:

<img alt="" src="https://github.com/user-attachments/assets/fca2436f-ea79-4228-839c-e77724ab7441" width="200">

Готовый маршрут:

<img alt="" src="https://github.com/user-attachments/assets/5ce7f992-e00d-44ed-93d8-a06f8c29ac92" width="600">








